<!DOCTYPE html>
 <html>
   <head>
      <title>Yale-P Website</title>
      <!-- Latest compiled and minified CSS -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->

      <!-- Optional theme -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"> -->

      <link rel="stylesheet" href="../static/bootstrap.min.css"
   </head>
   <body>
      <div style="max-width: 1500px; margin: 0 auto; padding: 10px">
         <h1>Building Search</h1>
         Please enter a building name:
         <input class="form-control" type="text" id="buildingInput" autoFocus>
      </div>

      <script 
      src= "https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js">
      </script>
      <!-- Latest compiled and minified JavaScript -->
      <script 
      src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
      </script>
      
      <!-- <script src="static/jquery.min.js"></script> -->

      <script>
         'use strict';

         function handleResponse(response)
         {
            let inner = ''
            if (response !== '') inner = "<hr>" + response;
            $('#searchResults').html(inner);
         }

         let request = null;

         function getResults()
         {
            let building = $('#buildingInput').val();
            building = encodeURIComponent(building);
            let url = '/search?building=' + building

            if (request != null)
               request.abort();

            request = $.ajax({
               type: 'GET',
               url: url,
               success: handleResponse
            });
         }

         function setup()
         {
            $('#buildingInput').on('input', getResults);
         }

         $('document').ready(setup);
      </script>  
      <div id="searchResults"></div>  
   </body>
 </html>

<!DOCTYPE html>
 <html>
   <head>
      <title>Yale-P Website</title>
      </head>
   <body>
      <h1>Building Search</h1>
      Please enter a building name:
      <input type="text" id="buildingInput" autoFocus>

      <div id="searchResults"></div>
      <script src= "https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js">
      </script>
      
      <!-- <script src="static/jquery.min.js"></script> -->

      <script>
         'use strict';

         function handleResponse(response)
         {
            console.log('HANDLERESPONSE')
            let inner = ''
            if (response !== '') inner = "<hr>" + response;
            console.log(inner)
            console.log(response)
            $('#searchResults').html(inner);
         }

         let request = null;

         function getResults()
         {
            let building = $('#buildingInput').val();
            building = encodeURIComponent(building);
            let url = '/search?building=' + building

            if (request != null)
               request.abort();

            request = $.ajax({
               type: 'GET',
               url: url,
               success: handleResponse
            });
         }

         function setup()
         {
            $('#buildingInput').on('input', getResults);
         }

         $('document').ready(setup);
      </script>    
   </body>

 </html>
